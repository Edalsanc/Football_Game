var backgroud,soundBall,soundReferee,soundEnviroment,soundWin,soundPositive,soundGool,soundFail,scoreText,punterox,punteroy,tweenGoalkeeper,x,y,bx,by,finalScore,tryAgain,promo,currentScore=3,goles=0,isGoal=!1,isShot=!1,isRunning=!0,colisionGoalkeper=!1,colisionG=!1,style={font:"70px calculator",fill:"#ffb500",align:"center"};class Game extends Phaser.Scene{constructor(){super()}init(){}preload(){this.load.image("background","assets/img/football-mini-game.webp"),this.load.image("goal","assets/img/Gool.webp"),this.load.image("point","assets/img/point.webp"),this.load.image("ballSmall","assets/img/ball-small.webp"),this.load.image("tope","assets/img/tope.webp"),this.load.spritesheet("sprite","assets/img/sprite1.webp",{frameWidth:170,frameHeight:163}),this.load.spritesheet("alert","assets/img/alert.webp",{frameWidth:240,frameHeight:136}),this.load.audio("sound1","./assets/sounds/football.mp3"),this.load.audio("sound2","./assets/sounds/referee.mp3"),this.load.audio("sound3","./assets/sounds/ambiente.mp3"),this.load.audio("soundGool","./assets/sounds/gool.mp3"),this.load.audio("soundFail","./assets/sounds/fail.mp3"),this.load.audio("soundWin","./assets/sounds/win_all_rows.mp3"),this.load.audio("soundPositive","./assets/sounds/positive.mp3")}create(){soundWin=this.sound.add("soundWin"),soundPositive=this.sound.add("soundPositive"),soundBall=this.sound.add("sound1"),soundReferee=this.sound.add("sound2"),soundEnviroment=this.sound.add("sound3"),soundGool=this.sound.add("soundGool"),soundFail=this.sound.add("soundFail"),soundEnviroment.volume=.5,soundReferee.volume=.4,soundEnviroment.loop=!0,tryAgain=this.add.dom(300,300,"button","","Nuevo Intento!"),tryAgain.addListener("click"),tryAgain.on("click",()=>{window.location.reload()}),tryAgain.node.id="tryAgain",tryAgain.setVisible(!1),promo=this.add.dom(0,0,"button","",""),promo.addListener("click"),promo.on("click",()=>{window.open("https://www.wplay.co/apuestas/registro?product=sport&page=sport-registration&back_url=https://apuestas.wplay.co/","_blank")}),promo.node.id="promo",promo.node.classList.add("promo"),promo.node.classList.add("tada"),promo.node.classList.add("animated"),promo.setVisible(!1),this.physics.world.setBoundsCollision(!1,!1,!1,!0),backgroud=this.add.image(360,290,"background"),this.tope=this.add.image(360,420,"tope"),this.tope=this.physics.add.sprite(360,420,"tope").setImmovable(),this.tope.body.allowGravity=!1,this.tope.alpha=.8,this.goal=this.add.image(380,190,"goal"),this.goal.setVisible(!1),scoreText=this.add.text(49,460,currentScore,style),finalScore=this.add.text(500,70,"Goles "+goles,{font:"40px Arial",fill:"#ffb500",align:"center"}),finalScore.setVisible(!1),this.ballSmall=this.physics.add.image(372,500,"ballSmall"),this.ballSmall.setBounce(.5),this.ballSmall.setCollideWorldBounds(!0),this.goalkeeper=this.physics.add.sprite(220,334,"sprite").setImmovable().setScale(1.1),this.point=this.add.image(400,300,"point"),this.alert=this.physics.add.sprite(600,110,"alert").setImmovable().setVisible(!1),this.alert.body.allowGravity=!1,this.goalkeeper.body.allowGravity=!1,this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("sprite",{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.create({key:"catched",frames:this.anims.generateFrameNumbers("sprite",{frames:[4]}),frameRate:10}),this.anims.create({key:"annotation",frames:this.anims.generateFrameNumbers("sprite",{frames:[5]}),frameRate:10}),this.anims.create({key:"message",frames:this.anims.generateFrameNumbers("alert",{start:0,end:2}),frameRate:2,repeat:-1}),this.physics.add.collider(this.ballSmall,this.goalkeeper,this.runCollision,null,this),this.physics.add.collider(this.ballSmall,this.tope,this.runCollision2,null,this),tweenGoalkeeper=this.tweens.add({targets:this.goalkeeper,props:{x:{value:505,duration:1800}},repeat:-1,yoyo:!0,onStart:()=>{soundEnviroment.play(),this.goalkeeper.anims.play("walk",!0)},onUpdate:()=>{isShot&&(colisionG&&(this.goalkeeper.x>365?this.goalkeeper.x=this.goalkeeper.x+60:this.goalkeeper.x=this.goalkeeper.x-60),colisionGoalkeper&&(this.goalkeeper.x=this.ballSmall.x))}}),this.input.on("pointerdown",this.animateObject,this)}update(){this.point.x=this.input.mousePointer.x,this.point.y=this.input.mousePointer.y}runCollision(){1==currentScore?colisionG=!0:colisionGoalkeper=!0}animateObject(e){punterox=e.x,punteroy=e.y,isShot=!0;let s=this.tweens.add({targets:this.ballSmall,props:{scaleX:{value:bx},scaleY:{value:by},y:{value:e.y,duration:800},x:{value:e.x,duration:800}},paused:!0,hold:2e3,onStart:()=>{soundBall.play(),isRunning=!1},onUpdate:()=>{this.ballSmall.y<420&&(bx=.9,by=.9),this.ballSmall.angle+=1,e.x>150&&e.x<560&&e.y>220&&e.y<410&&this.ballSmall.x>150&&this.ballSmall.x<560&&this.ballSmall.y>220&&this.ballSmall.y<410&&(colisionGoalkeper?(soundFail.play(),this.ballSmall.setVisible(!1),this.goalkeeper.anims.play("catched",!0)):(tweenGoalkeeper.pause(),soundGool.play(),isGoal=!0,this.goal.setVisible(!0),this.goalkeeper.anims.play("annotation",!0)))},onComplete:()=>{isRunning=!0,this.ballSmall.setVelocityX(0),this.ballSmall.setVelocityY(0),this.ballSmall.x=365,this.ballSmall.y=500,currentScore--,scoreText.text=currentScore,this.goal.setVisible(!1),colisionGoalkeper=!1,this.ballSmall.angle=0,currentScore<=0?(s.pause(),this.ballSmall.setVisible(!1),tweenGoalkeeper.pause(),this.goalkeeper.anims.pause(),backgroud.alpha=.2,scoreText.alpha=.2,this.scene.pause(),soundEnviroment.pause(),promo.setVisible(!0),soundWin.play(),soundPositive.play()):soundReferee.play(),isGoal&&goles++,isGoal=!1,finalScore.text="Goles "+goles,this.ballSmall.setScale(1),isShot=!1,this.goalkeeper.anims.play("walk",!0),this.ballSmall.setVisible(!0),tweenGoalkeeper.resume(),this.alert.setVisible(!1)}});isRunning&&(punterox>150&&punterox<560&&punteroy>220&&punteroy<410?(this.alert.setVisible(!1),s.play()):(this.alert.setVisible(!0),this.alert.anims.play("message",!0)))}goles(){return goles+=1}runCollision2(){console.log("run collision2")}}const config={type:Phaser.AUTO,parent:"phaser-game",width:720,height:580,dom:{createContainer:!0},font:{family:"calculator"},scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:720,height:580},physics:{default:"arcade",arcade:{gravity:{y:200},debug:!1}},scene:[Game]},game=new Phaser.Game(config);